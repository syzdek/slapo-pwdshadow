<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta name="generator" content="Manpage converted by man2html - see https://invisible-island.net/scripts/readme.html#others_scripts">
</HEAD>
<BODY>
<PRE>


</PRE><H2>SYNOPSIS</H2><PRE>
       /tmp/openldap/etc/openldap/slapd.conf


</PRE><H2>DESCRIPTION</H2><PRE>
       The <B>pwdshadow</B> overlay translates the attributes  used  by  the  <B>ppolicy</B>
       overlay into attributes compatible with the attributes in the <B>shadowAc</B>‚Ä<B>‚</B>Äê
       <B>count</B> object class defined by <I>RFC2307</I>.   The  attribtues  generated  by
       <B>pwdshadow</B>  can be used instead of the manually maintained attributes of
       <B>shadowAccount.</B>



</PRE><H2>CONFIGURATION</H2><PRE>
       These <B>slapd.conf(5)</B> configuration options apply to the <B>pwdshadow</B>  over‚Äê
       lay. They shoud appear after the <B>overlay</B> directive.


       <B>pwdshadow_default</B> <I>&lt;policyDN&gt;</I>
           Specify  the DN of the <B>pwdPolicy</B> and <B>pwdShadowPolicy</B> objects to use
           when no specific policy is set on a given user's entry. If there is
           no  specific  policy for an entry and no default is given, then the
           attributes <B>pwdShadowInactive</B>, <B>pwdShadowMax</B>, <B>pwdShadowMin</B>, and  <B>pwd</B>‚Ä<B>‚</B>Äê
           <B>ShadowWarning</B>  will  not  be  generated.  The default policy may be
           specified in the config backend by setting <B>olcPwdShadowDefault</B>.


       <B>pwdshadow_use_policies</B> <I>on</I> <B>|</B> <I>off</I>
           Specifies that the <B>pwdPolicy</B> and <B>pwdShadowPolicy</B> attributes  should
           be  retrieved from the DN specified by either the <B>pwdPolicySubentry</B>
           attribute (if present in the directory user's entry)  or  the  <B>pwd</B>‚Ä<B>‚</B>Äê
           <B>shadow_default</B>  configuration  option.  If this option is disabled,
           then only the <B>pwdShadowLastChanged</B> and  <B>pwdShadowExpire</B>  attributes
           will  be  generatd  by the overlay. This option may be specified in
           the config backend by setting <B>olcPwdShadowUsePolicies</B>.  The default
           is <I>on</I>.


       <B>pwdshadow_overrides</B> <I>on</I> <B>|</B> <I>off</I>
           The generated values for <B>pwdShadow</B> attributes can be manually over‚Äê
           ridden by setting the equivalent <B>shadowAccount</B>  attributes  on  the
           directory  user's entry. This option may be specified in the config
           backend by setting <B>olcPwdShadowOverrides</B>.  The default is <I>on</I>.



</PRE><H2>OBJECT CLASS</H2><PRE>
       <B>pwdshadow</B> overlay depends on the <B>pwdPolicy</B> and  <B>pwdShadowPolicy</B>  object
       classes.   The  definition  of  <B>pwdPolicy</B>  is documented by <B>slapo-ppol</B>‚Ä<B>‚</B>Äê
       <B>icy(5)</B>.  The definition of <B>pwdShadowPolicy</B> is as follows:


           (  1.3.6.1.4.1.27893.4.2.3.1
              NAME 'pwdShadowPolicy'


       <B>pwdShadowAutoExpire</B>
           If this attribute is set (its value is <I>TRUE</I>) in the <B>pwdShadowPolicy</B>
           object  and  <B>pwdEndTime</B>  is  not  set on the user's entry, then the
           value of <B>pwdShadowExpire</B> will be calculated by adding the values of
           <B>pwdShadowLastChange</B>,  <B>pwdShadowMax</B>,  and <B>pwdShadowInactive</B>.  If ei‚Äê
           ther <B>pwdShadowLastChange</B> or <B>pwdShadowMax</B> are not set on the  user's
           entry,  then no value will be set for <B>pwdShadowExpire.</B>  If <B>pwdShad</B>‚Ä<B>‚</B>Äê
           <B>owInactive</B> is not set on the user's entry, then a default value  of
           zero is used for <B>pwdShadowInactive.</B>


           (  1.3.6.1.4.1.27893.4.2.2.2
              NAME 'pwdShadowAutoExpire'
              DESC 'generate pwdShadowExpire from pwdShadow attributes'
              EQUALITY booleanMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.7
              SINGLE-VALUE )



</PRE><H2>OPERATIONAL ATTRIBUTES</H2><PRE>
       The  operational attributes used by the <B>pwdshadow</B> overlay are stored in
       the user's entry. Most of these  attributes  are  not  intended  to  be
       changed  directly  by  users;  they  are used to present the policy at‚Äê
       tributes from the <B>ppolicy</B> module in a format compatible with most  LDAP
       auth  implementations  used  by  Linux  distributions. However, if <B>pwd</B>‚Ä<B>‚</B>Äê
       <B>shadow_overrides</B> is enabled, the values of the  operational  attributes
       generated  by  the  overlay may be overridden by setting the equivelent
       <B>shadowAccount</B> attributes on the directory user's entry. The operational
       attributes  have  been detailed here so that systems administrators can
       configure their systems to use the generated LDAP attributes.


       <B>userPassword</B>
           The <B>userPassword</B> attribute is not part of  the  <B>pwdshadow</B>  overlay,
           however  it is tracked by the overlay. Please refer to the standard
           OpenLDAP schema for its definition.


       <B>pwdEndTime</B>
           The <B>pwdEndTime</B> attribute is not part of the <B>pwdshadow</B> overlay, how‚Äê
           ever  it  is  used to determine the value of <B>pwdShadowExpire</B> if the
           attribute <B>shadowExpire</B> is not present on the directory  user's  en‚Äê
           try.  Please refer to the man page for <B>slapo-ppolicy(5)</B> overlay for
           its definition.


       <B>pwdPolicySubentry</B>
           The <B>pwdPolicySubentry</B> attribute is not part of the <B>pwdshadow</B>  over‚Äê
           lay,  however  it is used to determine the <B>pwdPolicy</B> and <B>pwdShadow</B>‚Ä<B>‚</B>Äê
           <B>Policy</B> subentry that is to be used for  this  particular  directory
           user's entry.


           (  1.3.6.1.4.1.27893.4.2.2.1
              NAME 'pwdShadowGenerate'
              DESC 'generate shadowAccount equivalent attributes'
              EQUALITY booleanMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.7
              SINGLE-VALUE
              USAGE directoryOperation )


       <B>pwdShadowExpire</B>
           This  attribute contains the date of the expiration of the account,
           expressed as the number of days since January 1, 1970.  If  <B>pwdEnd</B>‚Ä<B>‚</B>Äê
           <B>Time</B>  is  present  on the user's entry, then <B>pwdShadowExpire</B> is de‚Äê
           rived from the value of <B>pwdEndTime</B>.  If <B>pwdEndTime</B> is  not  present
           on  the user's entry and <B>pwdShadowAutoExpire</B> is set on the <B>pwdShad</B>‚Ä<B>‚</B>Äê
           <B>owPolicy</B> object's entry, then <B>pwdShadowExpire</B> is derived by  adding
           the values of <B>pwdShadowLastChange</B>, <B>pwdShadowMax</B>, and <B>pwdShadowInac</B>‚Ä<B>‚</B>Äê
           <B>tive</B>.  Both <B>pwdShadowLastChange</B> and <B>pwdShadowMax</B> must be present on
           the  user's entry to generate the value using autoexpire.  This at‚Äê
           tribute can be overriden by setting <B>shadowExpire</B>.


           (  1.3.6.1.4.1.27893.4.2.1.10
              NAME 'pwdShadowExpire'
              DESC 'shadowExpire equivalent derived from pwdEndTime'
              EQUALITY integerMatch
              ORDERING integerOrderingMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
              SINGLE-VALUE
              NO-USER-MODIFICATION
              USAGE directoryOperation )


       <B>pwdShadowFlag</B>
           The overlay does not generate a value for this  attribute.   It  is
           included  by  the  overlay  for completeness. This attribute can be
           overriden by setting <B>shadowFlag</B>.


           (  1.3.6.1.4.1.27893.4.2.1.11
              NAME 'pwdShadowFlag'
              DESC 'duplicates shadowFlag'
              EQUALITY integerMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
              SINGLE-VALUE
              NO-USER-MODIFICATION
              USAGE directoryOperation )


              NO-USER-MODIFICATION
              USAGE directoryOperation )


       <B>pwdShadowLastChange</B>
           This attribute contains the date of the last password  change,  ex‚Äê
           pressed  as  the number of days since January 1, 1970.  This attri‚Äê
           bute is set to the current date when the <B>userPassword</B> attribute  is
           updated. If <B>pwdShadowGenerate</B> is set after the password was set and
           <B>pwdChangedTime</B> is  present  on  the  user's  entry,  then  <B>pwdShad</B>‚Ä<B>‚</B>Äê
           <B>owLastChange</B> is derived from the value of <B>pwdChangedTime</B>.  This at‚Äê
           tribute can be overriden by setting <B>shadowLastChange</B>.


           (  1.3.6.1.4.1.27893.4.2.1.5
              NAME 'pwdShadowLastChange'
              DESC 'The generated value for shadowLastChange'
              EQUALITY integerMatch
              ORDERING integerOrderingMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
              SINGLE-VALUE
              NO-USER-MODIFICATION
              USAGE directoryOperation )


       <B>pwdShadowMax</B>
           The number of days following the last password change on which  the
           password  must  again be changed.  <B>pwdMaxAge</B> is present on the <B>pwd</B>‚Ä<B>‚</B>Äê
           <B>Policy</B> object's entry, then <B>pwdShadowMax</B> is derived from the  value
           of  <B>pwdMaxAge</B>.   This attribute can be overriden by setting <B>shadow</B>‚Ä<B>‚</B>Äê
           <B>Max</B>.


           (  1.3.6.1.4.1.27893.4.2.1.7
              NAME 'pwdShadowMax'
              DESC 'shadowMax equivalent derived from pwdMaxAge'
              EQUALITY integerMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
              SINGLE-VALUE
              NO-USER-MODIFICATION
              USAGE directoryOperation )


       <B>pwdShadowMin</B>
           The minimum number of days after the password was last changed  be‚Äê
           fore  the password may again be changed. If <B>pwdMinAge</B> is present on
           the <B>pwdPolicy</B> object's entry, then <B>pwdShadowMin</B> is derived from the
           value  of  <B>pwdMinAge</B>.   This  attribute can be overriden by setting
           <B>shadowMin</B>.


           (  1.3.6.1.4.1.27893.4.2.1.6


           (  1.3.6.1.4.1.27893.4.2.1.8
              NAME 'pwdShadowWarning'
              DESC 'shadowWarning equivalent derived from pwdExpireWarning'
              EQUALITY integerMatch
              SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
              SINGLE-VALUE
              NO-USER-MODIFICATION
              USAGE directoryOperation )



</PRE><H2>EXAMPLES</H2><PRE>
           database mdb
           suffix dc=example,dc=com
           ...
           overlay pwdshadow
           pwdshadow_default "cn=Standard,ou=Policies,dc=example,dc=com"
           pwdshadow_override on



</PRE><H2>SEE ALSO</H2><PRE>
       <B>ldap(3)</B>, <B>slapd.conf(5)</B>, <B>slapd-config(5)</B>, <B>slapo-ppolicy(5)</B>, <B>shadow(5)</B>.

       "OpenLDAP Administrator's Guide" (http://www.OpenLDAP.org/doc/admin/)

       IETF LDAP password policy proposal by P. Behera, L. Poitou and J.  Ser‚Äê
       mersheim:  documented in IETF document "draft-behera-ldap-password-pol‚Äê
       icy-10.txt".

       "An  Approach  for  Using  LDAP as a Network Information Service" by L.
       Howard: documented in RFC2022.



</PRE><H2>BUGS</H2><PRE>
       The LDAP Password Policy specification is not yet an approved standard,
       and  it  is still evolving. This code will continue to be in flux until
       the specification is finalized.



</PRE><H2>ACKNOWLEDGEMENTS</H2><PRE>
       This module was written in 2004 by David M. Syzdek of  Alaska  Communi‚Äê
       catins and is modeled after slapo-ppolicy, slapo-refint, and slapo-mem‚Äê
       berof.




slapo-pwdshadow 0.0               2023/04/30                <B>SLAPO_PWDSHADOW(5)</B>
</PRE>
</BODY>
</HTML>
