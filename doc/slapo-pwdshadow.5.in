.lf 1 stdin
.\" Copyright (c) 2023 David M. Syzdek <david@syzdek.net>
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted only as authorized by the OpenLDAP
.\" Public License.
.\"
.\" A copy of this license is available in the file LICENSE in the
.\" top-level directory of the distribution or, alternatively, at
.\" <http://www.OpenLDAP.org/license.html>.
.\"
.TH SLAPO_PWDSHADOW 5 "RELEASEDATE" "slapo-pwdshadow LDVERSION"
.SH NAME
slapo\-pwdshadow \- Password Policy conversion to RFC2256 Shadow attribtues overlay
.SH SYNOPSIS
ETCDIR/slapd.conf
.SH DESCRIPTION
.LP
The \fBpwdshadow\fR overlay translates the attributes used by the \fBppolicy\fR
overlay into attributes compatible with the attributes in the shadowAccount
from \fBRFC2307\fR. The attribtues generated by \fBpwdshadow\fR can be used
instead of the manually maintained attributes of shadowAccount.

.SH CONFIGURATION
These \fBslapd.conf\fR configuration options apply to the pwdshadow overlay.
They shoud appear after the \fBoverlay\fR directive.
.TP
.B pwdshadow_use_policy TRUE | FALSE
Specify that Dereference and use attributes from the pwdPolicy object to
generate pwdShadow attributes. The default is TRUE.
.TP
.B pwdshadow_default <policyDN>
Specify the DN of the pwdPolicy object to use when no specific policy is
set on a given user's entry. If there is no specific policy for an entry
and no default is given, then the attributes \fBpwdShadowInactive\fR,
\fBpwdShadowMax\fR, \fBpwdShadowMin\fR, and \fBpwdShadowWarning\fR will not
be generated.
.TP
.B pwdshadow_override TRUE | FALSE
The generated values for pwdShadow attributes can be manually overridden by the
equivalent shadow attributes. The default is TRUE.
.TP
.B pwdshadow_autoexpire TRUE | FALSE
Generate the value of \fBpwdShadowExpire\fR from \fBpwdMaxAge\fR and
\fBpwdGraceExpiry\fR if \fBpwdEndTime\fR is not set on the user's entry. The
default is FALSE.

.SH OPERATIONAL ATTRIBUTES
The operational attributes used by the \fBpwdshadow\fR module are stored in the
user's entry. Most of these attributes are not intended to be changed directly
by users; they are used to present the policy attributes from the \fBppolicy\fR
module in a format compatible with most LDAP auth implementations of Linux
distributions. They have been detailed here so that systems administrators can
configure their systems to use the generated LDAP attributes.

.B userPassword
.P
The \fBuserPassword\fR attribute is not part of the \fBpwdshadow\fR module,
however it is tracked by the module. Please refer to the standard OpenLDAP
schema for its definition.

.B pwdPolicySubentry
.P
The \fBpwdPolicySubentry\fR attribute is not part of the \fBpwdshadow\fR module,
however it is used to determine the \fBpwdPolicy\fR subentry that is to be used
for this particular directory user. Please refer to the man page for
\fBppolicy\fR module for its definition.

.B pwdShadowGenerate
.P
This attribute controls if the module generates attributes for this particular
directory user. If the attribute is missing or set to \fBFALSE\fR, then the
module will not generate attributes for this particilar directory user. If this
attribute is removed from the directory user or changed from \fBTRUE\fR to
\fBFALSE\fR, then this module's attributes will be removed from the directory
user. If this attribute is added with a value of \fBTRUE\fR or changed from
\fBFALSE\fR to \fBTRUE\fB, then the attributes will be generated and added to
the directory user.
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.2.1
   NAME 'pwdShadowGenerate'
   DESC 'Enables the generation of shadow compatible attributes'
   EQUALITY booleanMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.7
   SINGLE-VALUE
   USAGE directoryOperation )
.RE

.B pwdShadowExpire
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.10
   NAME 'pwdShadowExpire'
   DESC 'The time the password was last changed'
   EQUALITY integerMatch
   ORDERING integerOrderingMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.B pwdShadowInactive
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.9
   NAME 'pwdShadowInactive'
   DESC 'The value of pwdGraceExpiry converted for shadowInactive'
   EQUALITY integerMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.B pwdShadowLastChange
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.5
   NAME 'pwdShadowLastChange'
   DESC 'The auto-generated value for shadowLastChange'
   EQUALITY integerMatch
   ORDERING integerOrderingMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.B pwdShadowMax
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.7
   NAME 'pwdShadowMax'
   DESC 'The value of pwdMaxAge converted for shadowMax'
   EQUALITY integerMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.B pwdShadowMin
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.6
   NAME 'pwdShadowMin'
   DESC 'The value of pwdMinAge converted for shadowMin'
   EQUALITY integerMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.B pwdShadowWarning
.P
.LP
.RS 4
(  1.3.6.1.4.1.27893.4.2.1.8
   NAME 'pwdShadowWarning'
   DESC 'The value of pwdExpireWarning converted for shadowWarning'
   EQUALITY integerMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
   SINGLE-VALUE
   NO-USER-MODIFICATION
   USAGE directoryOperation )
.RE

.SH EXAMPLES
.LP
.RS
.nf
database mdb
suffix dc=example,dc=com
\|...
overlay pwdshadow
pwdshadow_default "cn=Standard,ou=Policies,dc=example,dc=com"
pwdshadow_override on
.fi
.RE

.SH SEE ALSO
.BR ldap (3),
.BR slapd.conf (5),
.BR slapd\-config (5),
.BR slapo\-ppolicy (5),
.BR shadow (5).
.LP
"OpenLDAP Administrator's Guide" (http://www.OpenLDAP.org/doc/admin/)
.LP
IETF LDAP password policy proposal by P. Behera, L. Poitou and J.
Sermersheim:  documented in IETF document
"draft-behera-ldap-password-policy-10.txt".
.LP
"An Approach for Using LDAP as a Network Information Service" by L. Howard:
documented in RFC2022.

.SH BUGS
The LDAP Password Policy specification is not yet an approved standard, and it
is still evolving. This code will continue to be in flux until the
specification is finalized.

.SH ACKNOWLEDGEMENTS
This module was written in 2004 by David M. Syzdek of Alaska Communicatins and
is modeled after slapo-ppolicy, slapo-refint, and slapo-memberof.

.\" end of man page
